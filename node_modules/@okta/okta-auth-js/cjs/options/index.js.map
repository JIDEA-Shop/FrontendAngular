{"version":3,"file":"index.js","names":["getDefaultOptions","options","devMode","httpRequestClient","fetchRequest","storageUtil","getStorage","storageManager","STORAGE_MANAGER_OPTIONS","transactionManager","enableSharedStorage","mergeOptions","args","removeNils","buildOptions","assertValidConfig","issuer","removeTrailingSlash","tokenUrl","authorizeUrl","userinfoUrl","revokeUrl","logoutUrl","clientId","redirectUri","state","scopes","postLogoutRedirectUri","responseMode","responseType","pkce","useInteractionCodeFlow","httpRequestInterceptors","transformErrorXHR","transformAuthState","restoreOriginalUri","headers","cookies","getCookieSettings","isHTTPS","flow","codeChallenge","codeChallengeMethod","recoveryToken","activationToken","idx","useGenericRemediator","exchangeCodeForTokens","ignoreSignature","clientSecret","setLocation"],"sources":["../../../lib/options/index.ts"],"sourcesContent":["/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * \n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport { removeTrailingSlash, removeNils } from '../util';\nimport { assertValidConfig } from '../builderUtil';\nimport { OktaAuthOptions } from '../types';\n\nimport fetchRequest from '../fetch/fetchRequest';\nimport { getStorage, STORAGE_MANAGER_OPTIONS, enableSharedStorage, getCookieSettings } from './node';\nimport { isHTTPS } from '../features';\n\nexport function getDefaultOptions(): OktaAuthOptions {\n\n  \n  const options = {\n    devMode: false,\n    httpRequestClient: fetchRequest,\n    storageUtil: getStorage(),\n    storageManager: STORAGE_MANAGER_OPTIONS,\n    transactionManager: {\n      enableSharedStorage\n    }\n  };\n  return options;\n}\n\nfunction mergeOptions(options, args): OktaAuthOptions {\n  return Object.assign({}, options, removeNils(args), {\n    storageManager: Object.assign({}, options.storageManager, args.storageManager),\n    transactionManager: Object.assign({}, options.transactionManager, args.transactionManager),\n  });\n}\n\nexport function buildOptions(args: OktaAuthOptions = {}): OktaAuthOptions {\n  assertValidConfig(args);\n  args = mergeOptions(getDefaultOptions(), args);\n  return removeNils({\n    // OIDC configuration\n    issuer: removeTrailingSlash(args.issuer),\n    tokenUrl: removeTrailingSlash(args.tokenUrl),\n    authorizeUrl: removeTrailingSlash(args.authorizeUrl),\n    userinfoUrl: removeTrailingSlash(args.userinfoUrl),\n    revokeUrl: removeTrailingSlash(args.revokeUrl),\n    logoutUrl: removeTrailingSlash(args.logoutUrl),\n    clientId: args.clientId,\n    redirectUri: args.redirectUri,\n    state: args.state,\n    scopes: args.scopes,\n    postLogoutRedirectUri: args.postLogoutRedirectUri,\n    responseMode: args.responseMode,\n    responseType: args.responseType,\n    pkce: args.pkce === false ? false : true, // PKCE defaults to true\n    useInteractionCodeFlow: args.useInteractionCodeFlow,\n\n    // Internal options\n    httpRequestClient: args.httpRequestClient,\n    httpRequestInterceptors: args.httpRequestInterceptors,\n    transformErrorXHR: args.transformErrorXHR,\n    transformAuthState: args.transformAuthState,\n    restoreOriginalUri: args.restoreOriginalUri,\n    storageUtil: args.storageUtil,\n    headers: args.headers,\n    devMode: !!args.devMode,\n    storageManager: args.storageManager,\n    transactionManager: args.transactionManager,\n    cookies: getCookieSettings(args, isHTTPS()),\n    flow: args.flow,\n    codeChallenge: args.codeChallenge,\n    codeChallengeMethod: args.codeChallengeMethod,\n    recoveryToken: args.recoveryToken,\n    activationToken: args.activationToken,\n    // BETA WARNING: configs in this section are subject to change without a breaking change notice\n    idx: {\n      useGenericRemediator: !!args.idx?.useGenericRemediator, // false by default\n      exchangeCodeForTokens: args.idx?.exchangeCodeForTokens !== false // true by default\n    },\n\n    // Give the developer the ability to disable token signature validation.\n    ignoreSignature: !!args.ignoreSignature,\n\n    // Server-side web applications\n    clientSecret: args.clientSecret,\n    setLocation: args.setLocation\n  });\n}\n"],"mappings":";;;;;;;;;AAYA;;AACA;;AAGA;;AACA;;AACA;;AAlBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAUO,SAASA,iBAAT,GAA8C;EAGnD,MAAMC,OAAO,GAAG;IACdC,OAAO,EAAE,KADK;IAEdC,iBAAiB,EAAEC,qBAFL;IAGdC,WAAW,EAAE,IAAAC,gBAAA,GAHC;IAIdC,cAAc,EAAEC,6BAJF;IAKdC,kBAAkB,EAAE;MAClBC,mBAAmB,EAAnBA;IADkB;EALN,CAAhB;EASA,OAAOT,OAAP;AACD;;AAED,SAASU,YAAT,CAAsBV,OAAtB,EAA+BW,IAA/B,EAAsD;EACpD,OAAO,qBAAc,EAAd,EAAkBX,OAAlB,EAA2B,IAAAY,gBAAA,EAAWD,IAAX,CAA3B,EAA6C;IAClDL,cAAc,EAAE,qBAAc,EAAd,EAAkBN,OAAO,CAACM,cAA1B,EAA0CK,IAAI,CAACL,cAA/C,CADkC;IAElDE,kBAAkB,EAAE,qBAAc,EAAd,EAAkBR,OAAO,CAACQ,kBAA1B,EAA8CG,IAAI,CAACH,kBAAnD;EAF8B,CAA7C,CAAP;AAID;;AAEM,SAASK,YAAT,CAAsBF,IAAqB,GAAG,EAA9C,EAAmE;EAAA;;EACxE,IAAAG,8BAAA,EAAkBH,IAAlB;EACAA,IAAI,GAAGD,YAAY,CAACX,iBAAiB,EAAlB,EAAsBY,IAAtB,CAAnB;EACA,OAAO,IAAAC,gBAAA,EAAW;IAChB;IACAG,MAAM,EAAE,IAAAC,yBAAA,EAAoBL,IAAI,CAACI,MAAzB,CAFQ;IAGhBE,QAAQ,EAAE,IAAAD,yBAAA,EAAoBL,IAAI,CAACM,QAAzB,CAHM;IAIhBC,YAAY,EAAE,IAAAF,yBAAA,EAAoBL,IAAI,CAACO,YAAzB,CAJE;IAKhBC,WAAW,EAAE,IAAAH,yBAAA,EAAoBL,IAAI,CAACQ,WAAzB,CALG;IAMhBC,SAAS,EAAE,IAAAJ,yBAAA,EAAoBL,IAAI,CAACS,SAAzB,CANK;IAOhBC,SAAS,EAAE,IAAAL,yBAAA,EAAoBL,IAAI,CAACU,SAAzB,CAPK;IAQhBC,QAAQ,EAAEX,IAAI,CAACW,QARC;IAShBC,WAAW,EAAEZ,IAAI,CAACY,WATF;IAUhBC,KAAK,EAAEb,IAAI,CAACa,KAVI;IAWhBC,MAAM,EAAEd,IAAI,CAACc,MAXG;IAYhBC,qBAAqB,EAAEf,IAAI,CAACe,qBAZZ;IAahBC,YAAY,EAAEhB,IAAI,CAACgB,YAbH;IAchBC,YAAY,EAAEjB,IAAI,CAACiB,YAdH;IAehBC,IAAI,EAAElB,IAAI,CAACkB,IAAL,KAAc,KAAd,GAAsB,KAAtB,GAA8B,IAfpB;IAe0B;IAC1CC,sBAAsB,EAAEnB,IAAI,CAACmB,sBAhBb;IAkBhB;IACA5B,iBAAiB,EAAES,IAAI,CAACT,iBAnBR;IAoBhB6B,uBAAuB,EAAEpB,IAAI,CAACoB,uBApBd;IAqBhBC,iBAAiB,EAAErB,IAAI,CAACqB,iBArBR;IAsBhBC,kBAAkB,EAAEtB,IAAI,CAACsB,kBAtBT;IAuBhBC,kBAAkB,EAAEvB,IAAI,CAACuB,kBAvBT;IAwBhB9B,WAAW,EAAEO,IAAI,CAACP,WAxBF;IAyBhB+B,OAAO,EAAExB,IAAI,CAACwB,OAzBE;IA0BhBlC,OAAO,EAAE,CAAC,CAACU,IAAI,CAACV,OA1BA;IA2BhBK,cAAc,EAAEK,IAAI,CAACL,cA3BL;IA4BhBE,kBAAkB,EAAEG,IAAI,CAACH,kBA5BT;IA6BhB4B,OAAO,EAAE,IAAAC,uBAAA,EAAkB1B,IAAlB,EAAwB,IAAA2B,iBAAA,GAAxB,CA7BO;IA8BhBC,IAAI,EAAE5B,IAAI,CAAC4B,IA9BK;IA+BhBC,aAAa,EAAE7B,IAAI,CAAC6B,aA/BJ;IAgChBC,mBAAmB,EAAE9B,IAAI,CAAC8B,mBAhCV;IAiChBC,aAAa,EAAE/B,IAAI,CAAC+B,aAjCJ;IAkChBC,eAAe,EAAEhC,IAAI,CAACgC,eAlCN;IAmChB;IACAC,GAAG,EAAE;MACHC,oBAAoB,EAAE,CAAC,eAAClC,IAAI,CAACiC,GAAN,sCAAC,UAAUC,oBAAX,CADpB;MACqD;MACxDC,qBAAqB,EAAE,eAAAnC,IAAI,CAACiC,GAAL,0DAAUE,qBAAV,MAAoC,KAFxD,CAE8D;;IAF9D,CApCW;IAyChB;IACAC,eAAe,EAAE,CAAC,CAACpC,IAAI,CAACoC,eA1CR;IA4ChB;IACAC,YAAY,EAAErC,IAAI,CAACqC,YA7CH;IA8ChBC,WAAW,EAAEtC,IAAI,CAACsC;EA9CF,CAAX,CAAP;AAgDD"}